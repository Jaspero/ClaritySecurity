<div class="action-inset" [jpLoadClick]="open()" [loadClickStopPropagation]="true">
  <mat-icon>send</mat-icon> {{'ELEMENTS.SAMPLE_EMAIL.BUTTON' | transloco}}
</div>

<ng-template #dg>
  <h4 mat-dialog-title>{{'ELEMENTS.SAMPLE_EMAIL.DIALOG_TITLE' | transloco}}</h4>

  <form [formGroup]="form">
    <mat-dialog-content>
      <mat-form-field class="w-full">
        <mat-label>{{'ELEMENTS.SAMPLE_EMAIL.RECEIVER_EMAIL' | transloco}}</mat-label>
        <input type="email" matInput formControlName="email">
      </mat-form-field>

      <ng-container formGroupName="data">

        <hr>

        <h5 class="m-b-m m-t-m">{{'ELEMENTS.SAMPLE_EMAIL.DYNAMIC_DATA' | transloco}}</h5>

        <mat-form-field class="w-full" *ngFor="let field of fields">
          <mat-label>{{field.name}}</mat-label>
          <input matInput [formControlName]="field.id">
        </mat-form-field>
      </ng-container>
    </mat-dialog-content>

    <mat-dialog-actions class="jc-end">
      <button
        type="submit"
        mat-flat-button
        color="primary"
        [disabled]="form.invalid"
        [jpLoadClick]="send()">
        {{'ELEMENTS.SAMPLE_EMAIL.DIALOG_BUTTON' | transloco}}
      </button>
    </mat-dialog-actions>
  </form>
</ng-template>
