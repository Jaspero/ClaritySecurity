<h6>{{cData.label}}</h6>

<hr class="m-y-m">

<div class="ta-right">
  <button mat-button *ngIf="cData.allowUrl" (click)="openUploadDialog()">Add image from URL</button>&nbsp;
  <button mat-button *ngIf="cData.allowServerUpload" (click)="openFileUpload()">Add images</button>
</div>

<hr class="m-y-m">

<div
  class="jms-file-upload-list"
  *ngIf="cData.control.value.length; else noValue" cdkDropListGroup>
  <div class="jms-file-upload-image-container" *ngFor="let val of cData.control.value; index as index" cdkDropList [cdkDropListData]="index" cdkDropListOrientation="vertical">
    <img class="jms-file-upload-image" [src]="(val.data || val) | jpSanitize:'resourceUrl'" cdkDrag cdkDragBoundary=".jms-file-upload-list" (cdkDragEntered)="entered($event)" (cdkDragEnded)="ended($event)" [cdkDragData]="index">
    <button class="jms-file-upload-remove-image" type="button" mat-icon-button matTooltip="Remove" color="warn" (click)="removeImage(index, val)">
      <mat-icon>highlight_off</mat-icon>
    </button>
  </div>
</div>

<!--No images-->
<ng-template #noValue>
  <p class="p-y-m ta-center fg-secondary fs-small">No images added yet.</p>
</ng-template>

<!--Uplaod from URL-->
<ng-template #modal>
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Image URL</mat-label>
    <input matInput #url>
  </mat-form-field>

  <div class="ta-right">
    <button mat-button mat-dialog-close>Cancel</button>&nbsp;
    <button mat-flat-button color="primary" [disabled]="!url.value" (click)="addImage(url.value)" mat-dialog-close>Add image</button>
  </div>
</ng-template>

<!--Upload from disk-->
<input #file type="file" multiple hidden (change)="filesUploaded($event.target.files)">
