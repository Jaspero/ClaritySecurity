<mat-card>
  <mat-card-header>
    <p>{{cData.label}}</p>
  </mat-card-header>
  <mat-card-content>
    <div class="w-full flex jc-end">
      <button mat-button *ngIf="cData.allowUrl" (click)="openUploadDialog()">Add image from URL</button>
      <button mat-button *ngIf="cData.allowServerUpload" (click)="openFileUpload()">Add images</button>
    </div>

    <div
      class="jfsc-file-upload-list"
      *ngIf="cData.control.value.length; else noValue" cdkDropListGroup>

      <div *ngFor="let val of cData.control.value; index as index" cdkDropList [cdkDropListData]="index" cdkDropListOrientation="vertical">
        <img class="jfsc-file-upload-image" [src]="val.data | jpSanitize:'resourceUrl'" cdkDrag cdkDragBoundary=".jfsc-file-upload-list" (cdkDragEntered)="entered($event)" (cdkDragEnded)="ended($event)" [cdkDragData]="index">
        <button type="button" mat-icon-button matTooltip="Remove" color="warn" (click)="removeImage(index, val)" style="position: absolute; left: 0;">
          <mat-icon>highlight_off</mat-icon>
        </button>
      </div>
    </div>

  </mat-card-content>
</mat-card>

<!--No images-->
<ng-template #noValue>
  <p class="p-y-m ta-center">No images added yet.</p>
</ng-template>

<ng-template #modal>
  <p>Upload Image From URL</p>

  <mat-form-field class="w-full">
    <input matInput placeholder="URL" #url>
  </mat-form-field>

  <div class="w-full flex jc-end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-raised-button [disabled]="!url.value" (click)="addImage(url.value)" mat-dialog-close>Add image</button>
  </div>
</ng-template>

<!--Upload from disk-->
<input #file type="file" multiple hidden (change)="filesUploaded($event.target.files)">
